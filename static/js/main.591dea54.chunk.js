(this.webpackJsonpmaskdonotgo=this.webpackJsonpmaskdonotgo||[]).push([[0],{46:function(e,t,n){e.exports=n(76)},51:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(15),c=n.n(o),i=(n(51),n(17)),l=n.n(i),s=n(25),u=n(27),d=n(41),m=n(18),p=n(42),f=n.n(p),g=n(26),v=n(2),h=n(36),b=n(39),E=n(37),y=n(38),w=n(43),k=n.n(w),O=n(45),j=n.n(O),x=function(){var e=r.a.useState([]),t=Object(m.a)(e,2),n=t[0],a=t[1],o=r.a.useState([]),c=Object(m.a)(o,2),i=c[0],p=c[1],w=r.a.useState({lat:"",lng:""}),O=Object(m.a)(w,2),x=O[0],S=O[1];function M(e){var t=Object(d.a)(e),n=t[0];return t.slice(1).reduce((function(e,t){var a={},r=!0,o=!1,c=void 0;try{for(var i,l=n.entries()[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var s=Object(m.a)(i.value,2),d=s[0];a[s[1]]=t[d]}}catch(p){o=!0,c=p}finally{try{r||null==l.return||l.return()}finally{if(o)throw c}}return[].concat(Object(u.a)(e),[a])}),[])}var R=function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/assets/mask.json").then((function(e){return e.data}));case 2:t=e.sent,a(t.features);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(s.a)(l.a.mark((function e(){var t,n,a,r,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/assets/rapid-test.csv").then((function(e){var t=e.body.getReader(),n=new TextDecoder("utf-8");return t.read().then((function(e){return n.decode(e.value)}))}));case 2:for(t=e.sent,n=j.a.parse(t),a=M(n.data),r=Object(u.a)(a),o=0;o<a.length;o++)c=N(a[o]["\u91ab\u4e8b\u6a5f\u69cb\u4ee3\u78bc"]),r[o].properties={mask_adult:r[o]["\u85e5\u5c40\u96fb\u8a71"],mask_child:r[o]["\u85e5\u5c40\u5730\u5740"],name:r[o]["\u85e5\u5c40\u540d\u7a31"],updated:""},r[o].geometry={coordinates:c};console.log(r),p(r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function N(e){for(var t=0,a=n.length-1;t<=a;){if(n[t].properties.id===e)return n[t].geometry.coordinates;t++}}r.a.useEffect((function(){navigator.geolocation.getCurrentPosition((function(e){var t=e.coords;console.log("Your current position is:"),console.log("Latitude : "+t.latitude),console.log("Longitude: "+t.longitude),console.log("More or less "+t.accuracy+" meters."),S({lat:e.coords.latitude,lng:e.coords.longitude})}),(function(e){console.warn("ERROR("+e.code+"): "+e.message)}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}),R()}),[]),r.a.useEffect((function(){0!==n.length&&C()}),[n]);var _=[+x.lat,+x.lng];return r.a.createElement("div",null,0===i.length&&r.a.createElement("div",{style:{width:"100%",position:"absolute",left:"50%",right:"50%",top:"50%",bottom:"50%"}},r.a.createElement("div",{className:"d-block"},"\u8b80\u53d6\u5feb\u7be9\u5be6\u540d\u5236\u85e5\u5c40\u6e05\u55ae\u4e2d ...")),0!==i.length&&r.a.createElement(h.a,{center:_,zoom:14,maxZoom:18},r.a.createElement(b.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r.a.createElement(E.a,{position:_,icon:Object(v.divIcon)({html:Object(g.renderToStaticMarkup)(r.a.createElement("div",{style:{fontSize:20}},"\ud83d\udccc"))})}),r.a.createElement(k.a,{showCoverageOnHover:!1,spiderfyDistanceMultiplier:1,disableClusteringAtZoom:15},i.map((function(e){var t=e.geometry.coordinates,n=e.properties,a=n.mask_adult,o=n.mask_child,c=n.name,i=n.updated,l=t;return t?r.a.createElement("div",null,r.a.createElement(E.a,{position:[l[1],l[0]],icon:Object(v.divIcon)({html:Object(g.renderToStaticMarkup)(r.a.createElement("div",{style:{backgroundColor:"#fff",width:80,padding:"1px 10px",borderRadius:12}},r.a.createElement("p",{className:"mb-0"},"\ud83d\udc6c\ud83c\udffc: ",c),r.a.createElement("p",{className:"mb-0"},"\ud83d\udc6c\ud83c\udffc: ",a),r.a.createElement("p",{className:"mb-0"},"\ud83d\udc76: ",o)))})},r.a.createElement(y.a,null,r.a.createElement("div",null,r.a.createElement("p",null,"\u5e97\u540d: ",c),r.a.createElement("p",null,"\u66f4\u65b0\u6642\u9593: ",i))))):null})))))},S=(n(75),function(){return document.title="\u5feb\u7be9\u5be6\u540d\u5236\u85e5\u5c40\u5730\u5716",r.a.createElement(x,null)});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[46,1,2]]]);
//# sourceMappingURL=main.591dea54.chunk.js.map